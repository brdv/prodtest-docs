"use strict";(self.webpackChunkprodtest=self.webpackChunkprodtest||[]).push([[639],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>u});var i=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=i.createContext({}),c=function(e){var t=i.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=c(r),u=n,m=h["".concat(l,".").concat(u)]||h[u]||p[u]||a;return r?i.createElement(m,o(o({ref:t},d),{},{components:r})):i.createElement(m,o({ref:t},d))}));function u(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,o=new Array(a);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var c=2;c<a;c++)o[c]=r[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,r)}h.displayName="MDXCreateElement"},6704:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=r(7462),n=(r(7294),r(3905));const a={title:"RegisterService",sidebar_position:2,slug:"register-service"},o=void 0,s={unversionedId:"demo/technical-detail/registerService",id:"demo/technical-detail/registerService",title:"RegisterService",description:"The RegisterService is the first service that will be called by the proxy on incoming requests. This page describes how the service is designed and implemented.",source:"@site/docs/demo/technical-detail/registerService.md",sourceDirName:"demo/technical-detail",slug:"/demo/technical-detail/register-service",permalink:"/prodtest-docs/demo/technical-detail/register-service",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"RegisterService",sidebar_position:2,slug:"register-service"},sidebar:"tutorialSidebar",previous:{title:"Technical detail",permalink:"/prodtest-docs/demo/technical-detail/"}},l={},c=[{value:"Architecture",id:"architecture",level:2},{value:"Flow",id:"flow",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Development Choices",id:"development-choices",level:2}],d={toc:c};function p(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,i.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"The RegisterService is the first service that will be called by the proxy on incoming requests. This page describes how the service is designed and implemented."),(0,n.kt)("h2",{id:"architecture"},"Architecture"),(0,n.kt)("p",null,"The register service is built as a REST API and consists of two main layers (note: there is no database used in this service): the controller and the service."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"architecture schematic",src:r(9990).Z,width:"1202",height:"926"})),(0,n.kt)("p",null,"The controller is responsible for receiving and validating requests. The service handles the request, i.e. performs any needed business logic and prepares a response to be returned by the controller.\nIn case the request is invalid, e.g. invalid data in POST request body, the server will respond with an error (in case of invalid data: validation error)."),(0,n.kt)("p",null,"This pattern has been chosen for two primary reasons: testablity and separation of concerns. It separates communication (request, response) and business logic (handler) from each other, thereby decoupling separate concerns within the application. This separation also makes it easier to test individual functionality (methods) independently from each other. (More about testing later)."),(0,n.kt)("h2",{id:"flow"},"Flow"),(0,n.kt)("p",null,"The image below shows an example of a possible flow in the service. (Description below image)."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Swim lane",src:r(4617).Z,width:"1450",height:"2042"})),(0,n.kt)("p",null,"Since this service is quite simple at the moment, the flow above is also quite simple. When a request is received by the OrderController, it validates the request. In case the request is not valid, it returns an appropriate error. If the request is valid, it will foreward the request to the KitchenService. The KitchenService will then handle the order and eventually return an OrderHandled object to the OrderController, which in turn returns this as a response to the client."),(0,n.kt)("h2",{id:"implementation"},"Implementation"),(0,n.kt)("p",null,"Below you can see an overview of the implemented classes to realise the RegisterService."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"class diagram",src:r(7243).Z,width:"4438",height:"2422"})),(0,n.kt)("h2",{id:"development-choices"},"Development Choices"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Context"),(0,n.kt)("th",{parentName:"tr",align:null},"Options"),(0,n.kt)("th",{parentName:"tr",align:null},"Choice"),(0,n.kt)("th",{parentName:"tr",align:null},"Rationale"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"In order to receive and allocate requests within the cluster, we need to choose a proxy"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://traefik.io"},"Traefik"),", ",(0,n.kt)("a",{parentName:"td",href:"https://www.nginx.com/"},"NginX"),", ",(0,n.kt)("a",{parentName:"td",href:"https://www.envoyproxy.io/"},"Envoy")),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Traefik")),(0,n.kt)("td",{parentName:"tr",align:null},"Very ",(0,n.kt)("a",{parentName:"td",href:"https://doc.traefik.io/traefik/routing/services/#mirroring-service"},"well documented")," data mirroring option + good kubernetes integrations.")))))}p.isMDXComponent=!0},9990:(e,t,r)=>{r.d(t,{Z:()=>i});const i=r.p+"assets/images/register-service-architecture-ceb8c2065f7f45e827ce4e77ef4c8309.png"},7243:(e,t,r)=>{r.d(t,{Z:()=>i});const i=r.p+"assets/images/register-service-class-diagram-eebb81fd81758d31a016dc324d214773.png"},4617:(e,t,r)=>{r.d(t,{Z:()=>i});const i=r.p+"assets/images/register-service-swim-lane-b35c618494539223c1f6409c2d62e9c2.png"}}]);